{
    "name": "Map FHIR Patient to DHIS2 Tracked Entity Instances",
    "description": "Map FHIR patient resource to DHIS2 Tracked Entity Instances",
    "endpoint": {
        "pattern": "/fhir-to-tei"
    },
    "transformation": {
        "input": "JSON",
        "output": "JSON"
    },
    "inputMapping": {
        "requestBody.meta.tag[0].code": "orgUnit",
        "constants.inactive": "inactive",
        "constants.deleted": "inactive",
        "constants.featureType": "featureType",
        "constants.attributes[0].attribute": "attributes[0].attribute",
        "requestBody.id": "attributes[0].value",
        "constants.attributes[1].attribute": "attributes[1].attribute",
        "requestBody.identifier[0].value": "attributes[1].value",
        "constants.attributes[2].attribute": "attributes[2].attribute",
        "requestBody.identifier[1].value": "attributes[2].value",
        "constants.attributes[3].attribute": "attributes[3].attribute",
        "requestBody.name[0].given[0]": "attributes[3].value",        
        "constants.attributes[4].attribute": "attributes[4].attribute",
        "requestBody.name[0].text": "attributes[4].value",
        "constants.attributes[5].attribute": "attributes[5].attribute",
        "requestBody.birthDate": "attributes[5].value",
        "constants.attributes[8].attribute": "attributes[6].attribute",
        "requestBody.telecom[0].value": "attributes[6].value",
        "requestBody.meta.lastUpdated": "enrollments[0].enrollmentDate",
        "constants.enrollments[0].trackedEntity": "enrollments[0].trackedEntity",
        "constants.enrollments[0].program": "enrollments[0].program"
    },
    "constants": {
        "eventDate": "2023-05-31",
        "occurredAt": "2023-05-31",
        "programStage": "Qpuicl4a94s",
        "program": "jwn5nGdUepW",
        "event": "u1iwJSdZDzr",
        "status": "COMPLETED",
        "completedDate": "2023-05-31",
        "attributeOptionCombo": "uGIJ6IdkP7Q",
        "orgUnit": "EF5pbiM7RSX",
        "trackedEntityInstance": "hBscn5EifIY",
        "enrollment": "yl77FkoPPr7",
        "relationships": [],
        "dataValues": [
                {
                    "dataElement": "vjABPom3WZD",
                    "value": "true"
                },
                {
                    "dataElement": "igk7wHUjNoY",
                    "value": "true"
                },
                {
                    "dataElement": "H96DVMnlKbi",
                    "value": "2023-05-31"
                },
                {
                    "dataElement": "rRh555ufFsW",
                    "value": "referral place orgunit"
                },
                {
                    "dataElement": "caq1Rf8wDx7",
                    "value": "Diabetes and hypertension risk screening"
                },
                {
                    "dataElement": "v96qvNbmSIz",
                    "value": "practitioner"
                }
            ]
    }
}
